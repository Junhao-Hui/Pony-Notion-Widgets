<!DOCTYPE html>
<!-- original:https://codepen.io/boudra/pen/raErwP -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendar</title>

  <style>
    :root{
      --bg: #1f1e1c;                 /* 暖黑底 */
      --ink: #e8e3dc;                /* 暖白字 */
      --muted: rgba(232,227,220,.62);
      --dim: rgba(232,227,220,.20);
      --line: rgba(255,255,255,.10);
      --line2: rgba(255,255,255,.14);
      --hover: rgba(255,255,255,.07);
      --chip: rgba(255,255,255,.10);
      --accent: #c8b08a;
      --shadow: 0 16px 40px rgba(0,0,0,.42);

      /* 角变小：更利落 */
      --radius: 14px;
      --cell-radius: 14px;
      --btn-radius: 999px;
    }

    body{
      margin: 0;
      background: transparent;
      color: var(--ink);
      font-family: "Times New Roman","Noto Serif SC",serif;
      color-scheme: dark;

      font-variant-numeric: tabular-nums;
      font-feature-settings: "tnum" 1, "lnum" 1;
    }

    #calendari{
      margin: 0 auto;
      font-size: 14px;
      position: relative; /* 让 absolute table 以容器为参考，更适配 embed */
      width: 100%;
      max-width: 520px;
      min-height: 360px;  /* 给动画切换留空间 */
    }

    table{
      border-collapse: collapse;
      table-layout: fixed;
      position: absolute;

      background: var(--bg);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      overflow: hidden;

      /* 角更干净：外阴影 + 内描边 */
      box-shadow:
        var(--shadow),
        inset 0 0 0 1px rgba(255,255,255,.05);
    }

    td, th{
      text-align: center;
      background: transparent;
    }

    th{
      padding: 10px;
      border-top: 1px solid var(--line);
      border-right: 1px solid rgba(255,255,255,.06);
      color: var(--ink);
      text-shadow: none;
      font-weight: normal;
    }

    tr:first-child th{
      font-size: 20px;
      font-weight: 600;
      border-left: none;
      border-top: none;
      border-right: none;
      background: transparent;
      padding: 14px 10px 10px;
    }

    tr:nth-child(2) th{
      padding: 6px 5px;
      color: var(--muted);
      letter-spacing: .12em;
      border-right: 1px solid rgba(255,255,255,.06);
    }

    th .any{
      font-size: 12px;
      display: block;
      color: var(--muted);
      letter-spacing: 3px;
      margin-top: 6px;
    }

    td{
      padding: 0;
      border-bottom: 1px solid rgba(255,255,255,.04);
    }

    td > span{
      display: block;
      padding: 10px;
      color: var(--ink);
      border-radius: var(--cell-radius);
      border: 2px solid transparent;
      transition: background .15s ease, border-color .15s ease, color .15s ease;
    }

    /* 原来的 even stripe 在深色下会显“脏”，换成更克制的微弱对比 */
    td:nth-child(even) > span{
      background: rgba(255,255,255,.012);
    }

    td.fora > span{
      opacity: .22;
      color: var(--dim);
    }

    td:last-child > span,
    td:nth-child(6) > span{
      color: rgba(232,227,220,.82);
    }

    td > span:hover{
      background: var(--hover);
      border-color: rgba(255,255,255,.10);
      color: var(--ink);
    }

    td.avui > span{
      background: var(--chip);
      border-color: rgba(255,255,255,.14);
      font-weight: 700;
      position: relative;
    }

    td.avui > span::after{
      content: "";
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--accent);
      position: absolute;
      left: 50%;
      bottom: 6px;
      transform: translateX(-50%);
    }

    /* ===== 对称箭头：用同一个 SVG + 镜像 ===== */
    .boto-next, .boto-prev{
      position: absolute;
      top: 15px;
      height: 30px;
      width: 30px;

      border-radius: var(--btn-radius);
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      color: var(--ink);

      padding: 0;
      line-height: 1;

      display: grid;
      place-items: center;

      cursor: pointer;
      transition: background .15s ease, border-color .15s ease;
    }

    .boto-prev{ left: 10px; }
    .boto-next{ right: 10px; }

    .boto-next:hover, .boto-prev:hover{
      background: rgba(255,255,255,.08);
      border-color: rgba(255,255,255,.20);
    }

    .boto-next svg, .boto-prev svg{
      width: 14px;
      height: 14px;
      display: block;
    }

    /* 左箭头：同一个图形镜像，保证几何对称 */
    .boto-prev svg{
      transform: scaleX(-1);
    }

    button:focus{ outline: none; }

    /* 让 embed 在窄宽时也不至于挤 */
    @media (max-width: 360px){
      #calendari{ max-width: 360px; min-height: 340px; }
      tr:first-child th{ font-size: 18px; }
      td > span{ padding: 9px; }
    }
  </style>
</head>

<body>
  <div id="calendari"></div>

  <script>
    var mesos = [
      'January','February','March','April','May','June',
      'July','August','September','October','November','December'
    ];

    var dies_abr = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];

    Number.prototype.pad = function(num) {
      var str = '';
      for (var i = 0; i < (num - this.toString().length); i++) str += '0';
      return str += this.toString();
    }

    // 对称 chevron（右箭头），左箭头用 CSS scaleX(-1) 镜像
    var CHEVRON_SVG =
      '<svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">' +
      '<path fill="currentColor" d="M9.2 5.6a1 1 0 0 1 1.4 0l6 6a1 1 0 0 1 0 1.4l-6 6a1 1 0 1 1-1.4-1.4L14.8 12 9.2 6.4a1 1 0 0 1 0-1.4z"/>' +
      '</svg>';

    function calendari(widget, data){
      var original = widget.getElementsByClassName('actiu')[0];

      if (typeof original === 'undefined'){
        original = document.createElement('table');
        original.setAttribute('data-actual',
          data.getFullYear() + '/' +
          data.getMonth().pad(2) + '/' +
          data.getDate().pad(2)
        );
        widget.appendChild(original);
      }

      var diff = data - new Date(original.getAttribute('data-actual'));
      diff = new Date(diff).getMonth();

      var e = document.createElement('table');
      e.className = diff === 0 ? 'amagat-esquerra' : 'amagat-dreta';
      e.innerHTML = '';
      widget.appendChild(e);

      e.setAttribute('data-actual',
        data.getFullYear() + '/' +
        data.getMonth().pad(2) + '/' +
        data.getDate().pad(2)
      );

      var fila = document.createElement('tr');
      var titol = document.createElement('th');
      titol.setAttribute('colspan', 7);

      var boto_prev = document.createElement('button');
      boto_prev.className = 'boto-prev';
      boto_prev.innerHTML = CHEVRON_SVG; // 左箭头由 CSS 镜像产生

      var boto_next = document.createElement('button');
      boto_next.className = 'boto-next';
      boto_next.innerHTML = CHEVRON_SVG;

      titol.appendChild(boto_prev);
      titol.appendChild(document.createElement('span')).innerHTML =
        mesos[data.getMonth()] + '<span class="any">' + data.getFullYear() + '</span>';
      titol.appendChild(boto_next);

      boto_prev.onclick = function(){
        data.setMonth(data.getMonth() - 1);
        calendari(widget, data);
      };

      boto_next.onclick = function(){
        data.setMonth(data.getMonth() + 1);
        calendari(widget, data);
      };

      fila.appendChild(titol);
      e.appendChild(fila);

      fila = document.createElement('tr');
      for (var i = 1; i < 7; i++) fila.innerHTML += '<th>' + dies_abr[i] + '</th>';
      fila.innerHTML += '<th>' + dies_abr[0] + '</th>';
      e.appendChild(fila);

      var inici_mes = new Date(data.getFullYear(), data.getMonth(), -1).getDay();
      var actual = new Date(data.getFullYear(), data.getMonth(), -inici_mes);

      for (var s = 0; s < 6; s++){
        var fila = document.createElement('tr');

        for (var d = 1; d < 8; d++){
          var cela = document.createElement('td');
          var span = document.createElement('span');
          cela.appendChild(span);

          span.innerHTML = actual.getDate();

          if (actual.getMonth() !== data.getMonth()) cela.className = 'fora';

          if (data.getDate() == actual.getDate() && data.getMonth() == actual.getMonth())
            cela.className = 'avui';

          actual.setDate(actual.getDate() + 1);
          fila.appendChild(cela);
        }
        e.appendChild(fila);
      }

      setTimeout(function(){
        e.className = 'actiu';
        original.className += diff === 0 ? ' amagat-dreta' : ' amagat-esquerra';
      }, 20);

      original.className = 'inactiu';

      setTimeout(function(){
        var inactius = document.getElementsByClassName('inactiu');
        for (var i = 0; i < inactius.length; i++) widget.removeChild(inactius[i]);
      }, 1000);
    }

    calendari(document.getElementById('calendari'), new Date());
  </script>
</body>
</html>
